<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1">

  
    
    
      <link href="/css/fonts.css" rel="stylesheet" type="text/css">
    
  

  
  <title>Adding Custom Chroma Styles to Hugo Themes</title>

  
  
  <link rel="stylesheet" href="/css/hugo-octopress.css">

  
  

  
    <link rel="stylesheet" href="/css/fork-awesome.min.css">
  

  
  <link href="http://localhost:1313/favicon.png" rel="icon">

  
  

  <meta name="description" content="" />
  <meta name="keywords" content="[Parsia Hakimian Parsiya infosec information security]">
  <meta name="author" content="Parsia">

  
  <meta name="generator" content="Hugo 0.83.1" />

  
  

  
  
    

  
    <meta name="twitter:card" content="summary"/>
  
  
  <meta name="twitter:title" content="Adding Custom Chroma Styles to Hugo Themes"/>
  <meta name="twitter:description" content="Update: Chroma now supports solarized-dark families. Currently, this version is not used in Hugo.

Hugo has switched to Chroma for syntax highlighting from Pygments. While it still supports Pygments, it appears Chroma is much faster. However, Chroma does not support the solarized dark theme that is used by Hugo-Octopress. So I had to generate the CSS and add it manually.

The process is decently simple because Chroma has a built-in tool for converting styles _tools/style.py. You can see the files inside my clone:


https://github.com/parsiya/Parsia-Clone/tree/master/random/chroma-pygments-convert


"/>
  
  <meta name="twitter:domain" content="parsiya.net"/>
  <meta name="twitter:creator" content="@CryptoGangsta"/>

  

  
  



</head>
<body>


<header role="banner">
<hgroup>
  
  <h1><a href="http://localhost:1313/">அஃக</a></h1>
    <h2>தமிழின் பெரிய சொற்தொகுப்பு</h2>
</hgroup></header>


<nav role="navigation">
<fieldset class="mobile-nav">
  
  <select onchange="location = this.value;">
    <option value="">Navigate…</option>
      
        <option value="http://localhost:1313/about/">» About Me!</option>
      
        <option value="http://localhost:1313/letters/">» எழுத்து</option>
      
  </select>
</fieldset>


<ul class="main-navigation">
  
  
    
      <li><a href="http://localhost:1313/about/" title="About Me!"  target="_blank"  rel="noopener noreferrer">About Me!</a></li>
    
  
    
      <li><a href="http://localhost:1313/letters/" title="எழுத்து"  target="_blank"  rel="noopener noreferrer">எழுத்து</a></li>
    
  
</ul>

<ul class="subscription">
  
    
        <a href="http://localhost:1313/index.xml" target="_blank" type="application/rss+xml" title="RSS" rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a>
    
  
</ul>


  <form action="https://www.google.com/search" method="get" target="_blank" rel="noopener noreferrer">
    <fieldset role="search">
      <input class="search" type="text" name="q" results="0" placeholder="Search"/>
      <input type="hidden" name="q" value="site:http://localhost:1313/" />
    </fieldset>
  </form>

</nav>


<div id="main">
  <div id="content">
    <div>
      <article class="hentry" role="article">

        
        

<header>
  <p class="meta">Apr 15, 2018
     - 2 minute read 
     - <a href="http://localhost:1313/blog/2018-04-15-adding-custom-chroma-styles-to-hugo-themes/#disqus_thread">Comments</a>

    
    
      - <a class="label" href="http://localhost:1313/categories/hugo/">Hugo </a><a class="label" href="http://localhost:1313/categories/not-security/">Not Security </a>
    
  </p>
  <h1 class="entry-title">
     Adding Custom Chroma Styles to Hugo Themes 
  </h1>
</header>


        <div class="entry-content">
          
          
          
          <p>Update: <a href="https://github.com/alecthomas/chroma" rel="nofollow" target="_blank">Chroma</a> now <a href="https://github.com/alecthomas/chroma/pull/140" rel="nofollow" target="_blank">supports</a> <code>solarized-dark</code> families. Currently, this version is not used in Hugo.</p>

<p>Hugo has switched to <a href="https://github.com/alecthomas/chroma" rel="nofollow" target="_blank">Chroma</a> for syntax highlighting from Pygments. While it still supports Pygments, it appears Chroma is much faster. However, Chroma does not support the <a href="https://github.com/john2x/solarized-pygment/" rel="nofollow" target="_blank">solarized dark</a> theme that is used by <a href="https://github.com/parsiya/Hugo-Octopress" rel="nofollow" target="_blank">Hugo-Octopress</a>. So I had to generate the CSS and add it manually.</p>

<p>The process is decently simple because Chroma has a <a href="https://github.com/alecthomas/chroma#styles" rel="nofollow" target="_blank">built-in tool for converting styles</a> <code>_tools/style.py</code>. You can see the files inside my clone:</p>

<ul>
<li><a href="https://github.com/parsiya/Parsia-Clone/tree/master/random/chroma-pygments-convert" rel="nofollow" target="_blank">https://github.com/parsiya/Parsia-Clone/tree/master/random/chroma-pygments-convert</a></li>
</ul>

<!-- Links before summary -->

<h2 id="instructions">Instructions</h2>

<p>These steps are for an Ubuntu 16 machine, but can be adapted for any OS.</p>

<ol>
<li>Install Go, configure <code>GOPATH</code> and the rest.</li>
<li>Install Chroma with <code>go get github.com/alecthomas/chroma</code>.</li>
<li>Install Python 3.</li>
<li>Install Pygments for Python 3: <code>sudo apt-get install python3-pygments</code>.</li>
<li>Install Pystache for Python 3: <code>sudo apt-get install python3-pystache</code>.</li>
<li>Clone <code>solarized dark</code>: <code>git clone https://github.com/john2x/solarized-pygment/</code> (do not need to install it).</li>
<li>(Optional) Rename the three py files inside <code>solarized=pygment/pygments_solarized</code> to more descriptive names. For example <code>dark.py</code> might become <code>solarized-dark.py</code>.</li>
<li>Open each of them and note the style class name. For example for <code>dark.py</code> it's <code>SolarizedDarkStyle</code>.</li>
<li>Copy the files to the <code>pygments</code> installation path. On my machine it was:

<ul>
<li><code>/usr/local/lib/python3.5/dist-packages/Pygments-2.2.0-py3.5.egg/pygments/styles</code>.</li>
</ul></li>
<li>Use the <code>_tools/style.py</code> to generate <code>go</code> files from styles:

<ul>
<li><code>python3 style.py [style-name] pygments.styles.[py-file-name].[style-class-name] &gt; style-name.go</code>

<ul>
<li><code>style-name</code> is a string with new style's name. E.g. <code>solarized-dark</code>.</li>
<li><code>py-file-name</code> is the name of the <code>py</code> file (w/o extension) that was copied to the Pygments directory. E.g. <code>dark</code>.</li>
<li><code>style-class-name</code> is the name of the python class inside the style. E.g. <code>SolarizedDarkStyle</code>.</li>
</ul></li>
</ul></li>
<li>My example command was:

<ul>
<li><code>python3 style.py solarized-dark pygments.styles.dark.SolarizedDarkStyle &gt; solarized-dark.go</code></li>
</ul></li>
<li>Repeat for any other styles.</li>
<li>Copy the resulting <code>go</code> files to <code>$GOPATH/Go/src/github.com/alecthomas/chroma/styles</code>.

<ul>
<li>You can open the file to double-check the style name passed to <code>chroma.MustNewStyle</code>:</li>
<li><code>var SolarizedDark = Register(chroma.MustNewStyle(&quot;solarized-dark&quot;, chroma.StyleEntries{</code></li>
</ul></li>

<li><p>Now create the following Go application (or copy <code>createCSS.go</code>). Modify the file and style names as needed and execute it:




<figure class="code">
  <figcaption>
  	<span>createCSS.go</span>
  </figcaption>
  <div class="codewrapper">
    <div class="highlight"><div style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#495050">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#719e07">package</span> main

<span style="color:#719e07">import</span> (
    <span style="color:#2aa198">&#34;os&#34;</span>

    <span style="color:#2aa198">&#34;github.com/alecthomas/chroma/formatters/html&#34;</span>
    <span style="color:#2aa198">&#34;github.com/alecthomas/chroma/styles&#34;</span>
)

<span style="color:#268bd2">func</span> <span style="color:#268bd2">main</span>() {
    f, _ <span style="color:#719e07">:=</span> os.<span style="color:#268bd2">Create</span>(<span style="color:#2aa198">&#34;solarized-dark.css&#34;</span>)
    <span style="color:#719e07">defer</span> f.<span style="color:#268bd2">Close</span>()

    formatter <span style="color:#719e07">:=</span> html.<span style="color:#268bd2">New</span>(html.<span style="color:#268bd2">WithClasses</span>())
    <span style="color:#719e07">if</span> err <span style="color:#719e07">:=</span> formatter.<span style="color:#268bd2">WriteCSS</span>(f, styles.<span style="color:#268bd2">Get</span>(<span style="color:#2aa198">&#34;solarized-dark&#34;</span>)); err <span style="color:#719e07">!=</span> <span style="color:#cb4b16">nil</span> {
        <span style="color:#b58900">panic</span>(err)
    }
}</code></pre></td></tr></table>
</div>
</div>
  </div>
</figure></p></li>

<li><p>Copy/paste the CSS files to your theme's CSS.</p></li>

<li><p>Inside your site's config file:</p>

<ul>
<li>Remove <code>pygmentsUseClassic</code>: This will tell Hugo to use Chroma.</li>
<li><code>pygmentsuseclasses = true</code>: Use CSS for highlighting.</li>
<li><code>pygmentscodefences = true</code>: This adds code highlight to code fences.</li>
</ul></li>
</ol>
        </div>
        

<footer>
  <p class="meta">
    <span class="byline author vcard">Posted by <span class="fn">Parsia</span></span>
    
    <time>Apr 15, 2018</time>
    
      <span class="categories">
        Tags:
        
          <a class="category" href="http://localhost:1313/tags/chroma">Chroma</a>  <a class="category" href="http://localhost:1313/tags/css">CSS</a>  
    
    </span>
  </p>

  

  <p class="meta">
    
        <a class="basic-alignment left" href="http://localhost:1313/blog/2018-03-17-blockchain-security-talk-at-nova-hackers/" title="Blockchain Security Talk at NoVA Hackers">Blockchain Security Talk at NoVA Hackers</a>
    

    
      <a class="basic-alignment right" href="http://localhost:1313/blog/2018-04-24-deploying-my-knowledge-base-at-parsiya.io-to-s3-with-travis-ci/" title="Deploying my Knowledge Base at parsiya.io to S3 with Travis CI">Deploying my Knowledge Base at parsiya.io to S3 with Travis CI</a>
    
  </p>
  
    
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "parsiya" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
  
</footer>

      </article>
    </div>
    

<aside class="sidebar thirds">
  <section class="first odd">

    
      <h1>Who am I?</h1>
    

    <p>
      
        <p>I am Pitchaimuthu Muthaiya, a senior security engineer.</p>

<p>I write about application tamil words and roots of words.</p>

<p>Click on <a href="/about/">About Me!</a> to know more.</p>

      
    </p>
  </section>



  
  <ul class="sidebar-nav">
    <li class="sidebar-nav-item">
      <a target="_blank" rel="noopener noreferrer" href="https://github.com/parsiya/" title="https://github.com/parsiya/"><i class="fa fa-github fa-3x"></i></a>
      
      
      <a target="_blank" rel="noopener noreferrer" href="https://twitter.com/cryptogangsta/" title="https://twitter.com/cryptogangsta/"><i class="fa fa-twitter fa-3x"></i></a>
      
        <a target="_blank" rel="noopener noreferrer" href="https://keybase.io/parsiya/" title="https://keybase.io/parsiya/"><i class="fa fa-keybase fa-3x"></i></a> 
      
      <a target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/parsiya" title="https://www.linkedin.com/in/parsiya"><i class="fa fa-linkedin fa-3x"></i></a>
      
      
      
      
      

    
    
    </li>
  </ul>

  

  
    
      <section class="odd">
        
          <h1>Collections</h1>
        
        
          <li>
            <a href="http://localhost:1313/categories/thick-client-proxying/" title="Thick Client Proxying" >Thick Client Proxying</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/writeup/" title="CTFs/Writeups" >CTFs/Writeups</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/attack-surface-analysis/" title="Attack Surface Analysis" >Attack Surface Analysis</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/bug-bounty/" title="Bug Bounty" >Bug Bounty</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/go/" title="Go/Golang" >Go/Golang</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/blockchain/" title="Blockchain" >Blockchain</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/burp-extension/" title="Burp Extension Development" >Burp Extension Development</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/automation/" title="Automation" >Automation</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/reverse-engineering/" title="Reverse Engineering" >Reverse Engineering</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/crypto/" title="Crypto(graphy)" >Crypto(graphy)</a>
          </li>
        
          <li>
            <a href="http://localhost:1313/categories/winappdbg/" title="WinAppDbg" >WinAppDbg</a>
          </li>
        
          <li>
            <a href="https://awsome.pw" title="AWSome.pw - S3 bucket squatting - my very legit branded vulnerability" >AWSome.pw - S3 bucket squatting - my very legit branded vulnerability</a>
          </li>
        
      </section>
    
  

  
  
  
</aside>

  </div>
</div>

    <footer role="contentinfo">
      <p>Copyright &copy; 2021 Parsia - <a href="http://localhost:1313/license/">License</a> -
        <span class="credit">Powered by <a target="_blank" href="https://gohugo.io" rel="noopener noreferrer">Hugo</a> and <a target="_blank" href="https://github.com/parsiya/hugo-octopress/" rel="noopener noreferrer">Hugo-Octopress</a> theme.
      </p>
    </footer>

    
    



    
    
    

    
  </body>
</html>

